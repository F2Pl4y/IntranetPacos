const dominio = "https://f3rn4nd021py.pythonanywhere.com/"; function empSelectCargos() { $.ajax({ type: "GET", url: dominio + "empleados/select/", dataType: "json", success: function (a) { var b = ""; $.each(a.resultado, function (d, c) { var a = "<tr>"; a += "<td>" + c.idEmpleado + "</td>", a += "<td>" + c.nombreEmpleado + "</td>", a += "<td>" + c.correoEmpleado + "</td>", a += "<td>" + c.encuestasRealizadas + "</td>", a += "<td>" + c.estado + "</td>", a += "<td>" + c.idCargo + "</td>", a += '<td class="grupoBotones">', a += '<div class="btn-group">', a += '<button class="btn">', a += '<a href="#" class="btn btn-warning" data-toggle="modal" data-target="#myModal2" onclick=empGet(' + c.idEmpleado + ')><i class="gg-info"></i></a>', a += "</button>", a += '<button class="btn">', a += '<a href="#" class="btn btn-danger" onclick="return empEliminar(' + c.idEmpleado + ')"><i class="gg-trash"></i></a>', a += "</button>", a += "</div>", a += "</td>", a += "</tr>", b += a }), $("#contenido2").html(b) } }) } function CargoUpdateEmp() { let b = window.location.pathname; var a = new FormData; a.append("miidnuevo", $("#miidnuevo").val()), a.append("micargonuevo", $("#contenidoCargosList").val()), a.append("tituloModalCargoDes", $("#tituloModalCargoDes").val()), $.ajax({ type: "PUT", url: dominio + "empleados/update2/" + a.get("miidnuevo") + "/", data: a, dataType: "json", contentType: !1, enctype: "multipart/form-data", processData: !1, success: function (a) { ("/pages/cuentasadmin.html" === b || "/pages/cuentasadmin" === b) && (AdminSelect(), cargosCombo()), "/pages/trabajadores.html" === b && (empSelectCargos(), cargosCombo()) } }), reset() } function cargosCombo() { $.ajax({ type: "GET", url: dominio + "cargos/select/", dataType: "json", success: function (b) { var a = ""; $.each(b.resultado, function (d, b) { if (1 == document.getElementById("AgregarEmpleadoBtn").value) { var c = '<option value="' + b.idCargo + '">' + b.idCargo + "&nbsp;:&nbsp;" + b.nombreCargo; c += "</option>", a += c } else { var c = '<option value="' + b.idCargo + '">' + b.idCargo + "&nbsp;:&nbsp;" + b.nombreCargo; c += "</option>", a += c } }), $("#contenidoCargosList").html(a), $("#contenidoCargosList2").html(a), $("#contenidoCargosList3").html(a), $("#contenidoCargosList4").html(a), $("#contenidoCargosList5").html(a) } }) } function cargosSelect() { $.ajax({ type: "GET", url: dominio + "cargos/select/", dataType: "json", success: function (a) { var b = ""; $.each(a.resultado, function (d, c) { if (1 == c.idCargo) { var a = "<tr>"; a += "<td>" + c.idCargo + "</td>", a += "<td>" + c.nombreCargo + "</td>", a += "<td>" + c.estado + "</td>", a += '<td class="grupoBotones">', a += '<div class="btn-group">', a += '<button class="btn">', a += '<a href="#" class="btn btn-warning" data-toggle="modal" data-target="#myModal2X" onclick=cargoGet(' + c.idCargo + ')><i class="gg-info"></i></a>', a += "</button>", a += "</div>", a += "</td>", a += "</tr>", b += a } else { var a = "<tr>"; a += "<td>" + c.idCargo + "</td>", a += "<td>" + c.nombreCargo + "</td>", a += "<td>" + c.estado + "</td>", a += '<td class="grupoBotones">', a += '<div class="btn-group">', a += '<button class="btn">', a += '<a href="#" class="btn btn-warning" data-toggle="modal" data-target="#myModal2X" onclick=cargoGet(' + c.idCargo + ')><i class="gg-info"></i></a>', a += "</button>", a += '<button class="btn">', a += '<a href="#" class="btn btn-danger" onclick="deshabilitar(' + c.idCargo + ')"><i class="gg-unavailable"></i></a>', a += "</button>", a += "</div>", a += "</td>", a += "</tr>", b += a } }), $("#contenido3").html(b) } }) } function empGetCargos(a) { $("#myModal3X").modal("hide"), $.ajax({ type: "GET", url: dominio + "empleadosXcargo/get/" + a + "/", dataType: "json", success: function (a) { $("#tituloModalCargoDes").html("<br>''" + a.resultado.nombreEmpleado + "''"), $("#miidnuevo").val(a.resultado.idEmpleado), $("#valorActualizar").val(a.resultado.idCargo), $("#micargonuevo").val(a.resultado.idCargo), $("#tituloModalCargoDes").val(a.resultado.nombreEmpleado), $("#micargonuevo").html("<br>''" + a.resultado.idCargo + "''") } }), reset() } function cargoGet(a) { console.log("el id es:", a), $.ajax({ type: "GET", url: dominio + "cargos/get/" + a + "/", dataType: "json", success: function (a) { $("#txtidCargoModal2x").val(a.resultado.idCargo2), $("#txtnombreCargo2").val(a.resultado.nombreCargo2), $("#tituloModalcargo1").html("<br>''" + a.resultado.nombreCargo2 + "''"), $("#tituloModalcargo2").html("<br>''" + a.resultado.nombreCargo2 + "''"), $("#nombreEmpleadoCargo").html("<br>''" + a.resultado.nombreCargo2 + "''") } }) } function cargoInsert() { console.log("entre a insert"); var a = new FormData; a.append("txtnombreCargo", $("#txtnombreCargo").val()), $.ajax({ type: "POST", url: dominio + "cargos/create/", data: a, dataType: "json", contentType: !1, enctype: "multipart/form-data", processData: !1, success: function (a) { cargosSelect(), cargosCombo() } }), reset() } function cerrarModal() { $("#myModal3").modal("hide") } function cargoUpdate() { let b = window.location.pathname; var a = new FormData; a.append("txtidCargoModal2x", $("#txtidCargoModal2x").val()), a.append("txtnombreCargo2", $("#txtnombreCargo2").val()), $.ajax({ type: "PUT", url: dominio + "cargos/update/" + a.get("txtidCargoModal2x") + "/", data: a, dataType: "json", contentType: !1, enctype: "multipart/form-data", processData: !1, success: function (a) { ("/pages/trabajadores.html" === b || "/pages/trabajadores" === b) && (cargosCombo(), cargosSelect()) } }), reset() } function reset() { $("#myModal2").find("input,textarea,select").val(""), $("#myModal2 input[type='checkbox']").prop("checked", !1).change(), $("#myModal1X").find("input,textarea,select").val(""), $("#myModal1X input[type='checkbox']").prop("checked", !1).change(), $("#myModal2X").find("input,textarea,select").val(""), $("#myModal2X input[type='checkbox']").prop("checked", !1).change(), $("#myModal3X").find("input,textarea,select").val(""), $("#myModal3X input[type='checkbox']").prop("checked", !1).change(), $("#myModal4X").find("input,textarea,select").val(""), $("#myModal4X input[type='checkbox']").prop("checked", !1).change() } function deshabilitar(a) { let b = window.location.pathname; console.log("id es deshabilitar (): " + a), $.ajax({ type: "PUT", url: dominio + "cargos/update2/" + a + "/", dataType: "json", success: function (a) { if ("/pages/trabajadores.html" === b || "/pages/trabajadores" === b) { if (cargosSelect(), a.resultado.length > 0) { var c = ""; console.log("hay gente"), $("#myModal1X").modal("hide"), $("#myModal3X").modal("show"), $.each(a.resultado, function (d, b) { if (console.log("el idcargo de update 2 es:" + b.idCargo), 1 == b.idCargo) { var a = "<tr>"; a += "<td>" + b.idEmpleado + "</td>", a += "<td>" + b.nombreEmpleado + "</td>", a += "<td>" + b.correoEmpleado + "</td>", a += "<td>" + b.encuestasRealizadas + "</td>", a += "<td>" + b.estado + "</td>", a += "<td>" + b.idCargo + "</td>", a += '<td class="grupoBotones">', a += '<div class="btn-group">', a += '<button class="btn">', a += '<a href="#" class="btn btn-warning" data-toggle="modal" data-target="#myModal4X" onclick=cargoGet(' + b.idCargo + ')><i class="gg-info"></i></a>', a += "</button>", a += "</div>", a += "</td>", a += "</tr>", c += a } else { var a = "<tr>"; a += "<td>" + b.idEmpleado + "</td>", a += "<td>" + b.nombreEmpleado + "</td>", a += "<td>" + b.correoEmpleado + "</td>", a += "<td>" + b.encuestasRealizadas + "</td>", a += "<td>" + b.estado + "</td>", a += "<td>" + b.idCargo + "</td>", a += '<td class="grupoBotones">', a += '<div class="btn-group">', a += '<button class="btn">', a += '<a href="#" class="btn btn-warning" data-toggle="modal" data-target="#myModal4X" onclick=empGetCargos(' + b.idEmpleado + ')><i class="gg-info"></i></a>', a += "</button>", a += '<button class="btn">', a += '<a href="#" class="btn btn-danger" onclick="empEliminar(' + b.idEmpleado + ')"><i class="gg-trash"></i></a>', a += "</button>", a += "</div>", a += "</td>", a += "</tr>", c += a } }), $("#contenido4").html(c), $("#modal3x").html("<br>''" + a.cargo + "''") } else console.log("vacio") } } }) } function Recargardeshabilitar(a) { let b = window.location.pathname; $.ajax({ type: "PUT", url: dominio + "EmpleadosXcargo/select/" + a + "/", dataType: "json", success: function (c) { if (console.log("el id de Recargar deshabilitar es: " + a), "/pages/trabajadores.html" === b || "/pages/trabajadores" === b) { var d = ""; $("#myModal3X").modal("show"), $.each(c.resultado, function (c, b) { if (1 == b.idCargo) { var a = "<tr>"; a += "<td>" + b.idEmpleado + "</td>", a += "<td>" + b.nombreEmpleado + "</td>", a += "<td>" + b.correoEmpleado + "</td>", a += "<td>" + b.encuestasRealizadas + "</td>", a += "<td>" + b.estado + "</td>", a += "<td>" + b.idCargo + "</td>", a += '<td class="grupoBotones">', a += '<div class="btn-group">', a += '<button class="btn">', a += '<a href="#" class="btn btn-warning" data-toggle="modal" data-target="#myModal4X" onclick=cargoGet(' + b.idCargo + ')><i class="gg-info"></i></a>', a += "</button>", a += "</div>", a += "</td>", a += "</tr>", d += a } else { var a = "<tr>"; a += "<td>" + b.idEmpleado + "</td>", a += "<td>" + b.nombreEmpleado + "</td>", a += "<td>" + b.correoEmpleado + "</td>", a += "<td>" + b.encuestasRealizadas + "</td>", a += "<td>" + b.estado + "</td>", a += "<td>" + b.idCargo + "</td>", a += '<td class="grupoBotones">', a += '<div class="btn-group">', a += '<button class="btn">', a += '<a href="#" class="btn btn-warning" data-toggle="modal" data-target="#myModal4X" onclick=empGetCargos(' + b.idEmpleado + ')><i class="gg-info"></i></a>', a += "</button>", a += '<button class="btn">', a += '<a href="#" class="btn btn-danger" onclick="empEliminar(' + b.idEmpleado + ')"><i class="gg-trash"></i></a>', a += "</button>", a += "</div>", a += "</td>", a += "</tr>", d += a } }), $("#contenido4").html(d) } } }) } function ocultar() { $("#myModal3X").modal("hide"), $("#myModal1X").modal("show") } function ocultar3() { $("#myModal4X").modal("hide"), $("#myModal3X").modal("show") } function ocultar2() { $("#myModal4X").modal("hide"), $("#myModal1X").modal("show") } function ocultar4() { $("#myModal4X").modal("hide"), $("#myModal3X").modal("hide"), $("#myModal1X").modal("show") } window.addEventListener("load", c => { let a = window.location.pathname; console.log("la url es:", a); let b = document.getElementById("btnEnviarCI"); b.addEventListener("click", b => { b.preventDefault(), ("/pages/trabajadores.html" === a || "/pages/trabajadores" === a) && (console.log("actualizando el cargo"), cargoUpdate(), cargosCombo(), $("#myModal2X").modal("hide"), $("#myModal1X").modal("show")), ("/pages/cuentasadmin.html" === a || "/pages/cuentasadmin" === a) && (console.log("la url dentro del pages es:", a), cargosCombo()) }), ("/pages/trabajadores.html" === a || "/pages/trabajadores" === a) && cargosSelect(), cargosCombo() }), window.addEventListener("load", c => { let a = window.location.pathname, b = document.getElementById("btnEnviarE2"); b.addEventListener("click", b => { b.preventDefault(), ("/pages/trabajadores.html" === a || "/pages/trabajadores" === a) && (ocultar2(), CargoUpdateEmp()) }), ("/pages/trabajadores.html" === a || "/pages/trabajadores" === a) && empSelectCargos() })