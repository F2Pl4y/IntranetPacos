const dominio2 = "https://f3rn4nd021py.pythonanywhere.com/"; function cargosCombo2() { $.ajax({ type: "GET", url: dominio2 + "cargos/select/", dataType: "json", success: function (b) { var a = ""; $.each(b.resultado, function (d, b) { if (1 == document.getElementById("AgregarEmpleadoBtn").value) { var c = '<option value="' + b.idCargo + '">' + b.idCargo + "&nbsp;:&nbsp;" + b.nombreCargo; c += "</option>", a += c } else { var c = '<option value="' + b.idCargo + '">' + b.idCargo + "&nbsp;:&nbsp;" + b.nombreCargo; c += "</option>", a += c } }), $("#contenidoCargosList").html(a), $("#contenidoCargosList2").html(a), $("#contenidoCargosList3").html(a), $("#contenidoCargosList4").html(a), $("#contenidoCargosList5").html(a) } }) } function empSelect() { $.ajax({ type: "GET", url: dominio2 + "empleados/select/", dataType: "json", success: function (a) { var b = ""; $.each(a.resultado, function (d, c) { var a = "<tr>"; a += "<td>" + c.idEmpleado + "</td>", a += "<td>" + c.nombreEmpleado + "</td>", a += "<td>" + c.correoEmpleado + "</td>", a += "<td>" + c.encuestasRealizadas + "</td>", a += "<td>" + c.estado + "</td>", a += "<td>" + c.idCargo + "</td>", a += '<td class="grupoBotones">', a += '<div class="btn-group">', a += '<button class="btn">', a += '<a href="#" class="btn btn-warning" data-toggle="modal" data-target="#myModal2" onclick=empGet(' + c.idEmpleado + ')><i class="gg-info"></i></a>', a += "</button>", a += '<button class="btn">', a += '<a href="#" class="btn btn-danger" onclick="return empEliminar(' + c.idEmpleado + ')"><i class="gg-trash"></i></a>', a += "</button>", a += "</div>", a += "</td>", a += "</tr>", b += a }), $("#contenido2").html(b) } }) } function AdminSelect() { $.ajax({ type: "GET", url: dominio2 + "admins/select/", dataType: "json", success: function (a) { var b = ""; $.each(a.resultado, function (d, c) { var a = "<tr>"; a += "<td>" + c.idEmpleado + "</td>", a += "<td>" + c.nombreEmpleado + "</td>", a += "<td>" + c.correoEmpleado + "</td>", a += "<td>" + c.encuestasRealizadas + "</td>", a += "<td>" + c.estado + "</td>", a += "<td>" + c.idCargo + "</td>", a += '<td class="grupoBotones">', a += '<div class="btn-group">', a += '<button class="btn">', a += '<a href="#" class="btn btn-warning" data-toggle="modal" data-target="#myModal2" onclick=empGet(' + c.idEmpleado + ')><i class="gg-info"></i></a>', a += "</button>", a += '<button class="btn">', a += '<a href="#" class="btn btn-danger" onclick="return empEliminar(' + c.idEmpleado + ')"><i class="gg-trash"></i></a>', a += "</button>", a += "</div>", a += "</td>", a += "</tr>", b += a }), $("#contenido2").html(b) } }) } function empGet(a) { $.ajax({ type: "GET", url: dominio2 + "empleados/get/" + a + "/", dataType: "json", success: function (a) { $("#txtidEmpleado").val(a.resultado.idEmpleado), $("#txtnombreEmpleado").val(a.resultado.nombreEmpleado), $("#txtcorreoEmpleado").val(a.resultado.correoEmpleado), $("#txtencuestasRealizadas").val(a.resultado.encuestasRealizadas), $("#txtestado").val(a.resultado.estado), $("#contenidoCargosList3").val(a.resultado.idCargo), $("#tituloModal").html("<br>''" + a.resultado.nombreEmpleado + "''") } }), formulario2.reset() } function empEliminar(a) { let b = window.location.pathname; return $.ajax({ type: "DELETE", url: dominio2 + "empleados/delete/" + a + "/", dataType: "json", success: function (a) { ("/pages/cuentasadmin.html" === b || "/pages/cuentasadmin" === b) && AdminSelect(), "/pages/trabajadores.html" === b && (ocultar4(), empSelect()) } }), !1 } function empInsert() { var a = new FormData; a.append("txtnombreEmpleado2", $("#txtnombreEmpleado2").val()), a.append("txtcorreoEmpleado2", $("#txtcorreoEmpleado2").val()), a.append("txtpasswordEmpleado2", $("#txtpasswordEmpleado2").val()), a.append("txtencuestasRealizadas2", $("#txtencuestasRealizadas2").val()), a.append("txtidCargo2", $("#contenidoCargosList2").val()), $.ajax({ type: "POST", url: dominio2 + "empleados/create/", data: a, dataType: "json", contentType: !1, enctype: "multipart/form-data", processData: !1, success: function (a) { empSelect() } }), formulario.reset() } function AdminInsert() { var a = new FormData; a.append("txtnombreEmpleado2", $("#txtnombreEmpleado2").val()), a.append("txtcorreoEmpleado2", $("#txtcorreoEmpleado2").val()), a.append("txtpasswordEmpleado2", $("#txtpasswordEmpleado2").val()), a.append("txtencuestasRealizadas2", $("#txtencuestasRealizadas2").val()), a.append("txtidCargo2", $("#contenidoCargosList").val()), $.ajax({ type: "POST", url: dominio2 + "empleados/create/", data: a, dataType: "json", contentType: !1, enctype: "multipart/form-data", processData: !1, success: function (a) { AdminSelect() } }), formulario.reset() } function cursoUpdate() { let b = window.location.pathname; var a = new FormData; a.append("txtidEmpleado", $("#txtidEmpleado").val()), a.append("txtnombreEmpleado", $("#txtnombreEmpleado").val()), a.append("txtcorreoEmpleado", $("#txtcorreoEmpleado").val()), a.append("txtpasswordEmpleado", $("#txtpasswordEmpleado").val()), a.append("txtencuestasRealizadas", $("#txtencuestasRealizadas").val()), a.append("txtidCargo", $("#contenidoCargosList3").val()), $.ajax({ type: "PUT", url: dominio2 + "empleados/update/" + a.get("txtidEmpleado") + "/", data: a, dataType: "json", contentType: !1, enctype: "multipart/form-data", processData: !1, success: function (a) { ("/pages/cuentasadmin.html" === b || "/pages/cuentasadmin" === b) && AdminSelect(), "/pages/trabajadores.html" === b && empSelect() } }), formulario2.reset() } window.addEventListener("load", c => { let a = window.location.pathname, b = document.getElementById("btnEnviarE"); cargosCombo2(), b.addEventListener("click", b => { b.preventDefault(), "/pages/trabajadores.html" === a && cursoUpdate(), ("/pages/cuentasadmin.html" === a || "/pages/cuentasadmin" === a) && cursoUpdate() }), "/pages/cuentasadmin.html" === a && AdminSelect(), "/pages/cuentasadmin" === a && AdminSelect(), ("/pages/trabajadores.html" === a || "/pages/trabajadores" === a) && empSelect() }), window.addEventListener("load", b => { let c = window.location.pathname, a = document.getElementById("btnEnviarI"); a.addEventListener("click", a => { a.preventDefault(), ("/pages/cuentasadmin.html" === c || "/pages/cuentasadmin" === c) && AdminInsert(), ("/pages/trabajadores.html" === c || "/pages/trabajadores" === c) && (console.log("entramos a trabajarrr"), empInsert()) }) })